name:ðŸ“ŠCodeCoverage

on:
push:
branches:[main,develop]
pull_request:
branches:[main,develop]

jobs:
coverage:
name:ðŸ“ŠGenerateCoverageReport
runs-on:ubuntu-latest

steps:
-name:ðŸ“¥Checkout
uses:actions/checkout@v4

-name:ðŸ“¦SetupNode.js
uses:actions/setup-node@v4
with:
node-version:'20.x'
cache:'npm'

-name:ðŸ“¥Installdependencies
run:npmci

-name:ðŸ§ªRuntestswithcoverage
run:npmruntest:coverage

-name:ðŸ“ŠUploadtoCodecov
uses:codecov/codecov-action@v4
with:
token:${{secrets.CODECOV_TOKEN}}
files:./coverage/lcov.info
flags:unittests
name:codecov-umbrella
fail_ci_if_error:false

-name:ðŸ“ŠUploadtoCoveralls
uses:coverallsapp/github-action@v2
with:
github-token:${{secrets.GITHUB_TOKEN}}
path-to-lcov:./coverage/lcov.info

-name:ðŸ“ŠGeneratecoveragebadge
uses:cicirello/jacoco-badge-generator@v2
with:
jacoco-csv-file:coverage/coverage-summary.json
badges-directory:badges
generate-branches-badge:true
generate-summary:true

-name:ðŸ’¬CommentPRwithcoverage
if:github.event_name=='pull_request'
uses:romeovs/lcov-reporter-action@v0.3.1
with:
lcov-file:./coverage/lcov.info
github-token:${{secrets.GITHUB_TOKEN}}
delete-old-comments:true
