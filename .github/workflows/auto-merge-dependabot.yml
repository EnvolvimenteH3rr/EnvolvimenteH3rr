name:ğŸ¤AutoMergeDependabot

on:
pull_request:
types:[opened,synchronize,reopened]

permissions:
contents:write
pull-requests:write

jobs:
auto-merge:
name:ğŸ¤–AutoMerge
runs-on:ubuntu-latest
if:github.actor=='dependabot[bot]'

steps:
-name:ğŸ“ŠCheckPRstatus
id:check
uses:actions/github-script@v7
with:
script:|
const{data:pullRequest}=awaitgithub.rest.pulls.get({
owner:context.repo.owner,
repo:context.repo.repo,
pull_number:context.payload.pull_request.number
});

//VerificaseÃ©umPRdoDependabot
if(context.actor!=='dependabot[bot]'){
console.log('NotaDependabotPR');
returnfalse;
}

//VerificaotÃ­tulodoPRparadeterminarotipodeupdate
consttitle=pullRequest.title.toLowerCase();
constisPatch=title.includes('patch')||title.match(/\d+\.\d+\.\d+/);
constisMinor=title.includes('minor');

returnisPatch||isMinor;

-name:ğŸ¯Auto-approvePR
if:steps.check.outputs.result=='true'
uses:hmarr/auto-approve-action@v4
with:
github-token:${{secrets.PAT_TOKEN}}

-name:ğŸ”€Enableauto-merge
if:steps.check.outputs.result=='true'
run:ghprmerge--auto--squash"${{github.event.pull_request.number}}"
env:
GH_TOKEN:${{secrets.PAT_TOKEN}}

-name:ğŸ’¬CommentonPR
if:steps.check.outputs.result=='true'
uses:actions/github-script@v7
with:
script:|
awaitgithub.rest.issues.createComment({
owner:context.repo.owner,
repo:context.repo.repo,
issue_number:context.payload.pull_request.number,
body:'ğŸ¤–Auto-mergehabilitado!EstePRserÃ¡mergeadoautomaticamentequandotodososcheckspassarem.âœ…'
});
